# Работа с сессиями в PHP
Работа с сессиями в PHP — важный механизм для хранения данных между запросами пользователя. Сессии позволяют сохранять информацию о пользователе (например, авторизацию, настройки) без передачи этих данных в каждом запросе.

## Основные понятия
- Сессия — набор данных, привязанных к конкретному пользователю.
- Каждому пользователю присваивается уникальный идентификатор сессии (session_id), который обычно хранится в cookie.
- Данные сессии хранятся на сервере.

## Основные функции для работы с сессиями
| Функция             | Описание                                          |
| ------------------- | ------------------------------------------------- |
| `session_start()`   | Запускает сессию или возобновляет существующую    |
| `$_SESSION`         | Суперглобальный массив для хранения данных сессии |
| `session_destroy()` | Удаляет все данные текущей сессии                 |
| `session_unset()`   | Очищает все переменные сессии                     |
| `session_id()`      | Получает или устанавливает идентификатор сессии   |


## Пример использования сессии
```php
// Начинаем сессию (в самом начале скрипта, до вывода)
session_start();

// Записываем данные в сессию
$_SESSION['username'] = 'Ivan';
$_SESSION['role'] = 'admin';

// Читаем данные из сессии
echo "Пользователь: " . $_SESSION['username'];

// Удаляем одну переменную
unset($_SESSION['role']);

// Завершаем сессию (удаляем все данные)
session_destroy();
```

## Где размещать session_start()?
- Вызывать до любого вывода (до echo, HTML и т.п.), иначе будет ошибка.
- Обычно помещают в самый верх PHP-файла.

## Как проверить, активна ли сессия?
```php
session_start();
if (isset($_SESSION['username'])) {
    echo "Пользователь авторизован: " . $_SESSION['username'];
} else {
    echo "Пользователь не авторизован";
}
```

## Безопасность сессий
- Настраивайте параметры сессий в php.ini или через session_set_cookie_params() (например, время жизни, путь, флаг httponly).
- Используйте HTTPS и флаг secure для cookie сессии.
- По возможности регенерируйте session_id() после успешного входа пользователя (session_regenerate_id()), чтобы избежать атак с угоном сессии.
- Не храните в сессии чувствительные данные без шифрования.
