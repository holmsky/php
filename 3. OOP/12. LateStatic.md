# Позднее статическое связывание
Позднее статическое связывание (Late Static Binding, LSB) в ООП PHP — это механизм, позволяющий обращаться к наследуемым статическим методам и свойствам, относительно вызывающего класса, а не того, в котором определён метод.

## Проблема, которую решает LSB
До PHP 5.3 статические вызовы внутри наследуемых методов всегда ссылались на тот класс, где метод был изначально определён.

Позднее статическое связывание позволяет использовать ключевое слово static, которое разрешается в контексте потомка, а не родителя.


## Пример без позднего связывания
```php
class ParentClass {
    public static function who() {
        echo __CLASS__;
    }

    public static function test() {
        self::who(); // ❌ всегда вызовет ParentClass::who()
    }
}

class ChildClass extends ParentClass {
    public static function who() {
        echo __CLASS__;
    }
}

ChildClass::test(); // Вывод: ParentClass ❌
```

## С поздним статическим связыванием (static::)
```php
class ParentClass {
    public static function who() {
        echo __CLASS__;
    }

    public static function test() {
        static::who(); // ✅ Late static binding
    }
}

class ChildClass extends ParentClass {
    public static function who() {
        echo __CLASS__;
    }
}

ChildClass::test(); // Вывод: ChildClass ✅
```

## Разница между self:: и static::
| Выражение  | Поведение                                           |
| ---------- | --------------------------------------------------- |
| `self::`   | Ссылается на **текущий класс**, где определён метод |
| `static::` | Ссылается на **класс, который вызвал метод** (LSB)  |


## Где полезно использовать
- Статические фабрики:
```php
class Model {
    public static function create(): static {
        return new static();
    }
}

class User extends Model {}

$user = User::create(); // Возвращает экземпляр User, а не Model
```

- В шаблонах проектирования, например: Singleton, Factory Method, Active Record и пр.

## Ограничения
- LSB работает только со статическими методами и свойствами
- Не применяется к нестатическим методам — там уже работает обычная поздняя привязка объектов (через $this)
