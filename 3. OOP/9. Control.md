# Контроль типа
В ООП PHP, контроль типов — это механизм, который помогает убедиться, что переменные, аргументы, свойства и возвращаемые значения соответствуют ожидаемому типу. Это делает код более надёжным, читаемым и безопасным.

## Где применяется контроль типов в PHP
1. Аргументы функций / методов
2. Возвращаемые значения
3. Свойства класса
4. Объявления переменных (PHP 7.4+)
5. Интерфейсы и наследование

## Примеры контроля типов
✅ Типизация аргументов
```php
class User {}

function greet(User $user) {
    echo "Hello, user!";
}

greet(new User()); // OK
greet("not a user"); // ❌ TypeError
```

✅ Типизация возвращаемого значения
```php
function getNumber(): int {
    return 5;
}

echo getNumber(); // 5
```

✅ Типизация свойств (с PHP 7.4+)
```php
class Product {
    public string $name;
    public float $price;
}
```

✅ Union types (с PHP 8.0+)
```php
function format(int|string $value): string {
    return (string)$value;
}
```

✅ Nullable типы (?Type)
```php
function findUser(int $id): ?User {
    // может вернуть User или null
    return null;
}
```

✅ mixed, object, callable, array, bool, float, int, string и другие типы
```php
function calculateTotal(array $items): float {
    return array_sum($items);
}
```

## Включение строгой типизации
По умолчанию PHP пытается преобразовать типы. Чтобы отключить автоматические приведения типов, в начале файла можно указать:
```php
declare(strict_types=1);
```

Это заставит PHP выбрасывать TypeError, если типы не совпадают строго.


## Наследование и контроль типов
Если класс Child переопределяет метод fromParent() из Parent, то:
- Аргументы метода должны совпадать по типу (с PHP 7+)
- Возвращаемый тип может быть более специфичным (ковариантность)
- Типы аргументов могут быть более общими (контравариантность)

## Зачем нужен контроль типов?
- ✅ Улучшает автодополнение в IDE
- ✅ Упрощает отладку
- ✅ Делает API предсказуемым
- ✅ Защищает от ошибок во время исполнения
- ✅ Позволяет писать контрактно-ориентированный код
